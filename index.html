<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LiveChat - Moderne Echtzeit-Chat-Anwendung">
    <title>LiveChat - Modern Chat Application</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/chat.css">
</head>
<body>
    
    <!-- ============================================ -->
    <!-- LOGIN VIEW -->
    <!-- ============================================ -->
    <div id="login-view" class="view active" role="main">
        <div class="login-container">
            <div class="login-header">
                <h1 aria-label="LiveChat Logo">LIVE<span>CHAT</span></h1>
                <p>Willkommen zurück</p>
            </div>
            
            <form id="login-form" class="auth-form" aria-labelledby="login-heading">
                <h2 id="login-heading" class="sr-only">Anmelden</h2>
                
                <div class="form-group">
                    <label for="login-username">Benutzername</label>
                    <input 
                        type="text" 
                        id="login-username" 
                        name="username" 
                        placeholder="Benutzername eingeben"
                        aria-required="true"
                        aria-describedby="login-error"
                        required
                        tabindex="1"
                    >
                </div>
                
                <div class="form-group">
                    <label for="login-password">Passwort</label>
                    <input 
                        type="password" 
                        id="login-password" 
                        name="password" 
                        placeholder="Passwort eingeben"
                        aria-required="true"
                        aria-describedby="login-error"
                        required
                        tabindex="2"
                    >
                </div>
                
                <div class="form-error" id="login-error" role="alert" aria-live="polite"></div>
                
                <button type="submit" class="btn-primary" aria-label="Anmelden" tabindex="3">
                    <span class="btn-text">Anmelden</span>
                    <span class="btn-loading" style="display: none;" aria-hidden="true">
                        <span class="loading-spinner" role="status" aria-label="Lädt"></span> Laden...
                    </span>
                </button>
            </form>
            
            <div class="auth-switch">
                <p>Noch kein Konto? <a href="#" id="show-register" aria-label="Zur Registrierung wechseln" tabindex="4">Jetzt registrieren</a></p>
            </div>
        </div>
    </div>
    
    <!-- ============================================ -->
    <!-- REGISTER VIEW -->
    <!-- ============================================ -->
    <div id="register-view" class="view" role="main">
        <div class="login-container">
            <div class="login-header">
                <h1 aria-label="LiveChat Logo">LIVE<span>CHAT</span></h1>
                <p>Konto erstellen</p>
            </div>
            
            <form id="register-form" class="auth-form" aria-labelledby="register-heading">
                <h2 id="register-heading" class="sr-only">Registrieren</h2>
                
                <div class="form-group">
                    <label for="register-username">Benutzername</label>
                    <input 
                        type="text" 
                        id="register-username" 
                        name="username" 
                        placeholder="Benutzername wählen"
                        aria-required="true"
                        aria-describedby="register-error"
                        required
                        minlength="3"
                        tabindex="1"
                    >
                </div>
                
                <div class="form-group">
                    <label for="register-password">Passwort</label>
                    <input 
                        type="password" 
                        id="register-password" 
                        name="password" 
                        placeholder="Sicheres Passwort (min. 8 Zeichen)"
                        aria-required="true"
                        aria-describedby="register-error"
                        required
                        minlength="8"
                        tabindex="2"
                    >
                </div>
                
                <div class="form-group">
                    <label for="register-password-confirm">Passwort bestätigen</label>
                    <input 
                        type="password" 
                        id="register-password-confirm" 
                        name="password_confirm" 
                        placeholder="Passwort wiederholen"
                        aria-required="true"
                        aria-describedby="register-error"
                        required
                        tabindex="3"
                    >
                </div>
                
                <div class="form-error" id="register-error" role="alert" aria-live="polite"></div>
                
                <button type="submit" class="btn-primary" aria-label="Registrieren" tabindex="4">
                    <span class="btn-text">Registrieren</span>
                    <span class="btn-loading" style="display: none;" aria-hidden="true">
                        <span class="loading-spinner" role="status" aria-label="Lädt"></span> Laden...
                    </span>
                </button>
            </form>
            
            <div class="auth-switch">
                <p>Bereits ein Konto? <a href="#" id="show-login" aria-label="Zum Login wechseln" tabindex="5">Jetzt anmelden</a></p>
            </div>
        </div>
    </div>
    
    <!-- ============================================ -->
    <!-- CHAT VIEW -->
    <!-- ============================================ -->
    <div id="chat-view" class="view" role="main">
        <div class="chat-container">
            
            <!-- SIDEBAR -->
            <aside class="sidebar" id="sidebar" role="complementary" aria-label="Benutzerliste Sidebar">
                <!-- Logo & Header -->
                <div class="sidebar-header">
                    <h1 class="logo" aria-label="LiveChat Logo">LIVE<span>CHAT</span></h1>
                    <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Sidebar ein-/ausblenden" aria-expanded="true" tabindex="1">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="9" y1="3" x2="9" y2="21"></line>
                        </svg>
                    </button>
                </div>
                
                <!-- User List -->
                <div class="user-list-container">
                    <div class="user-list-header">
                        <h3>Benutzer</h3>
                        <span class="user-count" id="user-count" aria-label="Anzahl Benutzer">0</span>
                    </div>
                    
                    <div class="user-list" id="user-list" role="list" aria-label="Verfügbare Benutzer">
                        <!-- Users will be dynamically loaded here -->
                        <div class="loading-state" role="status" aria-label="Lade Benutzer">
                            <span class="loading-spinner" aria-hidden="true"></span>
                            <p>Lade Benutzer...</p>
                        </div>
                    </div>
                </div>
                
                <!-- Current User Profile -->
                <div class="sidebar-footer">
                    <div class="current-user" id="current-user" role="region" aria-label="Aktueller Benutzer">
                        <div class="user-avatar" aria-hidden="true">
                            <span id="current-user-initial">?</span>
                        </div>
                        <div class="user-info">
                            <div class="user-name" id="current-user-name" aria-label="Benutzername">Laden...</div>
                            <div class="user-email" id="current-user-email" aria-label="E-Mail">loading...</div>
                        </div>
                        <button class="settings-btn" id="settings-btn" aria-label="Profileinstellungen öffnen" tabindex="2">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M12 1v6m0 6v6m-9-9h6m6 0h6"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <button class="logout-btn" id="logout-btn" aria-label="Abmelden" tabindex="3">Logout</button>
                </div>
            </aside>
            
            <!-- MAIN CHAT AREA -->
            <main class="chat-main" id="main-content" role="main" aria-label="Chat Bereich">
                
                <!-- No Chat Selected State -->
                <div class="no-chat-selected" id="no-chat-selected">
                    <div class="no-chat-content">
                        <h2>Willkommen bei LiveChat</h2>
                        <p>Wähle einen Benutzer aus der Liste, um zu chatten</p>
                    </div>
                </div>
                
                <!-- Chat Header -->
                <header class="chat-header" id="chat-header" style="display: none;" role="banner">
                    <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Menü öffnen" aria-expanded="false" tabindex="4">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </button>
                    
                    <div class="chat-recipient" role="region" aria-label="Chat Partner">
                        <div class="user-avatar" aria-hidden="true">
                            <span id="recipient-initial">?</span>
                        </div>
                        <div class="recipient-info">
                            <div class="recipient-name" id="recipient-name" aria-label="Chat Partner Name">Select User</div>
                            <div class="recipient-status" id="recipient-status" aria-label="Status">
                                <span class="status-dot" aria-hidden="true"></span>
                                <span class="status-text">Offline</span>
                            </div>
                        </div>
                    </div>
                    
                    <button class="settings-btn" aria-label="Chat Einstellungen" tabindex="5">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </button>
                </header>
                
                <!-- Messages Area -->
                <div class="messages-container" id="messages-container" style="display: none;" role="region" aria-label="Nachrichten">
                    <div class="messages-list" id="messages-list" role="log" aria-live="polite" aria-atomic="false">
                        <!-- Messages will be dynamically loaded here -->
                    </div>
                </div>
                
                <!-- Message Input -->
                <div class="message-input-container" id="message-input-container" style="display: none;">
                    <form class="message-form" id="message-form" aria-label="Nachricht senden">
                        <div class="message-input-wrapper">
                            <button type="button" class="input-action-btn" id="emoji-btn" aria-label="Emoji auswählen" tabindex="6">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>
                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>
                                </svg>
                            </button>
                            
                            <input 
                                type="text" 
                                id="message-input" 
                                placeholder="Nachricht schreiben... (Markdown wird unterstützt)"
                                aria-label="Nachrichtentext eingeben"
                                aria-describedby="markdown-hint"
                                autocomplete="off"
                                tabindex="7"
                            >
                            
                            <button type="submit" class="send-btn" id="send-btn" aria-label="Nachricht senden" tabindex="8">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                                </svg>
                            </button>
                        </div>
                        
                        <div class="markdown-hint" id="markdown-hint" role="note" aria-label="Markdown Formatierungshinweise">
                            <span aria-label="Fett formatieren">**fett**</span>
                            <span aria-label="Kursiv formatieren">*kursiv*</span>
                            <span aria-label="Code formatieren">`code`</span>
                        </div>
                    </form>
                </div>
            </main>
            
        </div>
    </div>
    
    <!-- ============================================ -->
    <!-- PROFILE EDIT MODAL -->
    <!-- ============================================ -->
    <div class="modal" id="profile-modal" role="dialog" aria-labelledby="profile-modal-title" aria-modal="true">
        <div class="modal-overlay" id="modal-overlay" aria-hidden="true"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="profile-modal-title">Profil bearbeiten</h2>
                <button class="modal-close" id="modal-close" aria-label="Modal schließen" tabindex="1">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            
            <form id="profile-form" class="modal-form">
                <div class="form-group">
                    <label for="profile-username">Benutzername</label>
                    <input 
                        type="text" 
                        id="profile-username" 
                        name="username" 
                        placeholder="Neuer Benutzername"
                        aria-required="false"
                        aria-describedby="profile-error"
                        tabindex="2"
                    >
                </div>
                
                <div class="form-divider" role="separator" aria-hidden="true"></div>
                
                <div class="form-group">
                    <label for="profile-password">Neues Passwort</label>
                    <input 
                        type="password" 
                        id="profile-password" 
                        name="password" 
                        placeholder="Leer lassen zum Behalten"
                        aria-required="false"
                        aria-describedby="profile-password-hint profile-error"
                        tabindex="3"
                    >
                    <span id="profile-password-hint" class="sr-only">Mindestens 6 Zeichen. Leer lassen wenn keine Änderung gewünscht.</span>
                </div>
                
                <div class="form-group">
                    <label for="profile-password-confirm">Passwort bestätigen</label>
                    <input 
                        type="password" 
                        id="profile-password-confirm" 
                        name="password_confirm" 
                        placeholder="Neues Passwort wiederholen"
                        aria-required="false"
                        aria-describedby="profile-error"
                        tabindex="4"
                    >
                </div>
                
                <div class="form-error" id="profile-error" role="alert" aria-live="polite"></div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancel-profile-btn" aria-label="Abbrechen" tabindex="5">Abbrechen</button>
                    <button type="submit" class="btn-primary" aria-label="Profil speichern" tabindex="6">
                        <span class="btn-text">Speichern</span>
                        <span class="btn-loading" style="display: none;" aria-hidden="true">
                            <span class="loading-spinner" role="status" aria-label="Lädt"></span> Laden...
                        </span>
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- JavaScript Modules -->
    <script type="module" src="js/main.js"></script>
    
</body>
</html>